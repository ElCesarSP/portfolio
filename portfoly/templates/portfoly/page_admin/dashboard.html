{% extends 'portfoly/page_admin/base_admin.html' %}

{% block title %}Dashboard{% endblock %}
{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="admin-page-header">
    <h2 class="admin-page-title">Bem-vindo, {{ user.name }}!</h2>
    <p class="admin-page-subtitle">Visão geral do seu portfolio</p>
</div>

<!-- Stats Grid -->
<div class="admin-grid admin-grid-4" style="margin-bottom: 2rem;">
    <div class="admin-stats-card">
        <div class="admin-stats-label">Total de Projetos</div>
        <div class="admin-stats-value">{{ stats.total_projects }}</div>
        <i class="fas fa-folder admin-stats-icon"></i>
    </div>
    
    <div class="admin-stats-card">
        <div class="admin-stats-label">Experiências</div>
        <div class="admin-stats-value">{{ stats.total_experiments }}</div>
        <i class="fas fa-briefcase admin-stats-icon"></i>
    </div>
    
    <div class="admin-stats-card">
        <div class="admin-stats-label">Habilidades</div>
        <div class="admin-stats-value">{{ stats.total_skills }}</div>
        <i class="fas fa-star admin-stats-icon"></i>
    </div>
    
    <div class="admin-stats-card">
        <div class="admin-stats-label">Mensagens Não Lidas</div>
        <div class="admin-stats-value">{{ stats.unread_contacts }}</div>
        <i class="fas fa-envelope admin-stats-icon"></i>
    </div>
</div>

<!-- Recent Content -->
<div class="admin-grid admin-grid-2">
    <!-- Recent Projects -->
    <div class="admin-card">
        <div class="admin-card-header">
            <h3 class="admin-card-title">
                <i class="fas fa-folder"></i> Projetos Recentes
            </h3>
            <a href="{% url 'portfoly:admin_projects_list' %}" class="admin-btn admin-btn-sm admin-btn-outline">
                Ver Todos
            </a>
        </div>
        <div class="admin-card-body">
            {% if recent_projects %}
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    {% for project in recent_projects %}
                    <div style="padding: 0.75rem; background: var(--admin-bg-tertiary); border-radius: var(--admin-border-radius-sm);">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">{{ project.title }}</div>
                        <div style="font-size: 0.875rem; color: var(--admin-text-muted);">
                            <span class="admin-badge admin-badge-info">{{ project.category }}</span>
                            <span style="margin-left: 0.5rem;">{{ project.created_at|date:"d/m/Y" }}</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="text-align: center; color: var(--admin-text-muted); padding: 2rem 0;">
                    Nenhum projeto cadastrado ainda.
                </p>
            {% endif %}
        </div>
    </div>
    
    <!-- Recent Messages -->
    <div class="admin-card">
        <div class="admin-card-header">
            <h3 class="admin-card-title">
                <i class="fas fa-envelope"></i> Mensagens Recentes
            </h3>
            <a href="{% url 'portfoly:admin_contacts_list' %}" class="admin-btn admin-btn-sm admin-btn-outline">
                Ver Todas
            </a>
        </div>
        <div class="admin-card-body">
            {% if recent_contacts %}
                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    {% for contact in recent_contacts %}
                    <div style="padding: 0.75rem; background: var(--admin-bg-tertiary); border-radius: var(--admin-border-radius-sm);">
                        <div style="font-weight: 600; margin-bottom: 0.25rem;">{{ contact.name }}</div>
                        <div style="font-size: 0.875rem; margin-bottom: 0.25rem;">{{ contact.subject }}</div>
                        <div style="font-size: 0.875rem; color: var(--admin-text-muted);">
                            {% if not contact.read %}
                                <span class="admin-badge admin-badge-warning">Não Lida</span>
                            {% else %}
                                <span class="admin-badge admin-badge-success">Lida</span>
                            {% endif %}
                            <span style="margin-left: 0.5rem;">{{ contact.created_at|date:"d/m/Y H:i" }}</span>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
                <p style="text-align: center; color: var(--admin-text-muted); padding: 2rem 0;">
                    Nenhuma mensagem recebida ainda.
                </p>
            {% endif %}
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="admin-card" style="margin-top: 2rem;">
    <div class="admin-card-header">
        <h3 class="admin-card-title">
            <i class="fas fa-bolt"></i> Ações Rápidas
        </h3>
    </div>
    <div class="admin-card-body">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <a href="{% url 'portfoly:admin_project_create' %}" class="admin-btn admin-btn-primary">
                <i class="fas fa-plus"></i> Novo Projeto
            </a>
            <a href="{% url 'portfoly:admin_experiment_create' %}" class="admin-btn admin-btn-success">
                <i class="fas fa-plus"></i> Nova Experiência
            </a>
            <a href="{% url 'portfoly:admin_skill_create' %}" class="admin-btn admin-btn-warning">
                <i class="fas fa-plus"></i> Nova Habilidade
            </a>
            <a href="{% url 'portfoly:admin_profile' %}" class="admin-btn admin-btn-secondary">
                <i class="fas fa-user-edit"></i> Editar Perfil
            </a>
        </div>
    </div>
</div>
{% endblock %}
